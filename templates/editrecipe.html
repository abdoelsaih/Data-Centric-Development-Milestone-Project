{% extends 'base.html' %} {% block content %}

<!-- When selecting Edit recipe using the floating action button, the following page is displayed. The layout is effectively
the same as the add recipe page, but this time each field has been pre-populated using the fields returned from the database. -->

<div class="row collections-header">
    <h1>Edit recipe</h1>
</div>

<div class="row">
    {% for rec in recipe %}
    <form action="{{ url_for('update_recipe', recipe_id=rec._id) }}" method="POST">
        <div class="row">
            <div class="input-field col s12">
                <i class="material-icons prefix">cake</i>
                <select id="type" name="type" required>
                    {% for type in cakeTypes %}
                    {% if type == rec.type %}
                    <option value="{{rec.type}}" selected>{{rec.type}}</option>
                    {% else %}
                    <option value="{{type}}">{{type}}</option>
                    {% endif %}
                    {% endfor %}
                </select>
                <label>Cake Type</label>
                <span class="helper-text" data-error="wrong" data-success="right">Select your type of cake</span>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <i class="material-icons prefix">label</i>
                <input type="text" id="name" name="name" value="{{ rec.name }}" required />
                <label for="name">Cake Name</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <i class="material-icons prefix">add_a_photo</i>
                <input type="text" id="image" name="image" value="{{ rec.image }}" required />
                <label for="image">Image</label>
                <span class="helper-text" data-error="wrong" data-success="right">Please provide the link to your
                    image</span>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <i class="material-icons prefix">flag</i>
                <select id="cuisine" name="cuisine" required>
                    {% for type in cuisineTypes %}
                    {% if type == rec.cuisine %}
                    <option value="{{rec.cuisine}}" selected>{{ rec.cuisine }}</option>
                    {% else %}
                    <option value="{{type}}">{{type}}</option>
                    {% endif %}
                    {% endfor %}
                </select>
                <label>Cuisine</label>
                <span class="helper-text" data-error="wrong" data-success="right">Select your cake's cuisine</span>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <i class="material-icons prefix">portrait</i>
                <input type="text" id="author" name="author" value="{{ rec.author }}" required />
                <label for="author">Author</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <i class="material-icons prefix">mode_edit</i>
                <textarea class="materialize-textarea" id="description" name="description" required
                    value="{{ rec.description }}">{{ rec.description }}</textarea>
                <label for="description">Description</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <i class="material-icons prefix">local_hospital</i>
                <select id="healthy" name="healthy" required>
                    {% for type in healthyTypes %}
                    {% if type == rec.healthy %}
                    <option value="{{rec.healthy}}" selected>{{ rec.healthy }}</option>
                    {% else %}
                    <option value="{{type}}">{{type}}</option>
                    {% endif %}
                    {% endfor %}
                </select>
                <label>Healthy</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <i class="material-icons prefix">timer</i>
                <input type="number" id="prepTime" name="prepTime" value="{{ rec.time_to_cook.prepTime }}" required />
                <label for="prepTime">Preparation Time</label>
                <span class="helper-text" data-error="wrong" data-success="right">Please input the time in
                    minutes</span>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <i class="material-icons prefix">timer</i>
                <input type="number" id="cookTime" name="cookTime" value="{{ rec.time_to_cook.cookTime }}" required />
                <label for="cookTime">Cooking Time</label>
                <span class="helper-text" data-error="wrong" data-success="right">Please input the time in
                    minutes</span>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <i class="material-icons prefix">timer</i>
                <input type="number" id="readyIn" name="readyIn" value="{{ rec.time_to_cook.readyIn }}" required />
                <label for=" readyIn">Total Time</label>
                <span class="helper-text" data-error="wrong" data-success="right">Please input the time in
                    minutes</span>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <i class="material-icons prefix">restaurant</i>
                <input type="number" id="serves" name="serves" value="{{ rec.serves }}" required />
                <label for="serves">Servings</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <i class="material-icons prefix">list</i>
                <textarea class="materialize-textarea" id="ingredients" name="ingredients"
                    required>{{ ingredients }}</textarea>
                <label for="ingredients">Ingredients</label>
                <span class="helper-text" data-error="wrong" data-success="right">Please input each ingredient on a new
                    line</span>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <i class="material-icons prefix">assignment</i>
                <textarea class="materialize-textarea" id="instructions" name="instructions"
                    required>{{ instructions }}</textarea>
                <label for="instructions">Instructions</label>
                <span class="helper-text" data-error="wrong" data-success="right">Please input each instruction on a new
                    line</span>
            </div>
        </div>
        {% endfor %}
        <div class="row">
            <div class="center-align">
                <button id="add-recipe" class="btn hoverEnabled" type="submit" name="action">
                    Update recipe
                    <i class="material-icons right">update</i>
                </button>
            </div>
        </div>
    </form>
</div>

{% endblock %}